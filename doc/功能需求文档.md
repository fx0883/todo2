# 待办事项与时间管理应用功能需求文档

本文档详细描述了一款待办事项与时间管理类应用（类似于“Todoist”、“滴答清单”等）的功能需求，包括前端应用的页面设计、UI布局、交互设计以及后端（本地存储）功能。该应用旨在帮助用户高效管理任务和时间，提升工作与学习效率。

## 目录

1. [应用概述](#应用概述)
2. [前端功能需求](#前端功能需求)
    - [页面划分](#页面划分)
    - [各页面功能详情](#各页面功能详情)
    - [UI布局与交互设计](#ui布局与交互设计)
3. [后端功能需求](#后端功能需求)
    - [本地数据存储](#本地数据存储)
    - [数据模型设计](#数据模型设计)
    - [数据同步与备份](#数据同步与备份)
4. [盈利模式](#盈利模式)
5. [用户流程示例](#用户流程示例)
6. [结语](#结语)

## 应用概述

该待办事项与时间管理应用允许用户记录任务、设定提醒时间和优先级，帮助用户提升工作和学习效率。核心功能包括任务管理（创建、编辑、分类、标记完成）、与日历同步展示日程安排，以及统计与分析任务完成情况。应用提供高级版付费解锁更多功能和本地云端存储收费等多种盈利模式。

## 技术栈

### 前端技术栈

- **框架与工具：**
  - uni-app：跨平台开发框架
  - Vue 3：采用组合式 API 开发
  - Pinia：状态管理
  - uView UI：UI 组件库

- **开发语言：**
  - JavaScript 不要使用 TypeScript
  - SCSS：样式预处理
  - Vue Template：模板语法

- **工具链：**
  - HBuilderX：IDE
  - npm：包管理
  - Webpack/Vite：构建工具

- **关键特性：**
  - 组合式 API
  - 响应式数据管理
  - 路由管理
  - 生命周期钩子
  - 跨端适配

### 后端技术栈

- **框架与工具：**
  - Django 5.0
  - Django REST framework
  - PostgreSQL/MySQL
  - Redis

- **认证与安全：**
  - JWT 认证
  - Django REST framework SimpleJWT
  - CORS 支持

- **实时通信：**
  - Django Channels
  - WebSocket

- **文档工具：**
  - Swagger/OpenAPI
  - drf-spectacular

## 前端功能需求

### 页面划分

应用前端划分为以下主要页面：

1. 启动页（Splash Screen）
2. 主界面（Home）
3. 任务列表页（Task List）
4. 任务详情页（Task Detail）
5. 日历页（Calendar）
6. 统计页（Statistics）
7. 标签/分类页（Tags/Categories）
8. 设置页（Settings）
9. 高级功能页（Premium Features）
10. 我的页面（Profile）

### 各页面功能详情

#### 1. 启动页 (Splash Screen)

**功能：**
- 展示应用Logo及加载动画
- 检查本地数据加载完成后自动跳转至主界面

**UI布局：**
- 居中显示Logo
- 下方显示加载动画或进度条

**交互方式：**
- 无用户交互，自动跳转

#### 2. 主界面 (Home)

**功能：**
- 显示当天任务
- 快速添加任务
- 展示今日概览（任务总数、完成数、未完成数）
- 导航至其他页面

**UI布局：**
- 顶部导航栏：应用名称、设置按钮
- 今日任务列表：按优先级排序，显示任务标题、时间、优先级标识
- 底部导航栏：主页、日历、统计、我的
- 悬浮添加按钮：位于右下角，圆形加号按钮

**交互方式：**
- 点击任务进入编辑/详情页
- 滑动任务列表进行快速标记完成或删除
- 点击添加按钮弹出快速添加任务弹窗

#### 3. 任务列表页 (Task List)

**功能：**
- 按分类或标签浏览任务
- 查看所有任务或筛选任务（按优先级、日期等）
- 批量管理任务

**UI布局：**
- 顶部导航栏：分类/标签切换
- 任务列表：每项显示任务标题、截止日期、优先级
- 右上角筛选按钮
- 底部导航栏同步主页

**交互方式：**
- 点击任务进入编辑/详情页
- 长按进行批量选择
- 滑动或点击按钮进行任务筛选

#### 4. 任务详情页 (Task Detail)

**功能：**
- 显示任务详细信息
- 编辑任务内容（标题、描述、截止日期、提醒时间、优先级、分类/标签）
- 标记任务完成
- 删除任务

**UI布局：**
- 顶部导航栏：返回按钮、删除按钮
- 输入字段：任务标题、描述
- 日期选择器：截止日期、提醒时间
- 优先级选择：高、中、低
- 分类/标签选择
- 底部操作栏：保存按钮、标记完成按钮

**交互方式：**
- 输入框支持文本编辑
- 点击日期/时间弹出选择器
- 选择优先级和分类时显示下拉菜单
- 点击保存按钮保存更改

#### 5. 日历页 (Calendar)

**功能：**
- 显示月视图、周视图、日视图的任务安排
- 点击日期查看当天任务
- 拖动任务调整日期

**UI布局：**
- 顶部导航栏：视图切换按钮（月、周、日）
- 日历主体：根据选择视图显示不同时间段
- 任务标记：在对应日期显示任务标识
- 右下角添加按钮

**交互方式：**
- 滑动或点击切换视图
- 点击任务标识查看任务详情
- 拖动任务进行日期调整
- 点击添加按钮快速添加任务到选定日期

#### 6. 统计页 (Statistics)

**功能：**
- 显示任务完成率
- 时间分配分析图表
- 任务分类完成情况

**UI布局：**
- 顶部导航栏：统计时间范围选择（周、月、年）
- 图表区：饼图、柱状图展示不同统计数据
- 列表区：详细统计数据列表

**交互方式：**
- 选择不同时间范围刷新统计数据
- 点击图表元素查看详细信息

#### 7. 标签/分类页 (Tags/Categories)

**功能：**
- 创建、编辑、删除标签或分类
- 按标签/分类浏览任务

**UI布局：**
- 顶部导航栏：新增标签按钮
- 标签列表：每个标签显示名称和颜色标识
- 编辑模式下显示编辑和删除选项

**交互方式：**
- 点击标签筛选任务
- 长按标签进入编辑模式
- 点击新增按钮添加新标签

#### 8. 设置页 (Settings)

**功能：**
- 用户偏好设置（主题、通知设置）
- 高级功能订阅选项
- 本地数据备份与恢复
- 关于与帮助

**UI布局：**
- 分区列表：主题设置、通知设置、订阅选项、备份恢复、关于
- 每个设置项用列表项展示，带有开关或导航按钮

**交互方式：**
- 点击各设置项进入相应设置界面
- 切换开关保存设置
- 点击订阅按钮跳转至高级功能介绍
- 执行备份或恢复操作

#### 9. 高级功能页 (Premium Features)

**功能：**
- 展示高级功能介绍
- 购买高级版的入口

**UI布局：**
- 高级功能列表：云同步、多设备支持、更多标签颜色等
- 购买按钮与定价信息
- 试用按钮

**交互方式：**
- 点击购买按钮进入支付流程
- 点击试用按钮开启试用期

#### 10. 我的页面 (Profile)

**功能：**
- 显示用户基本信息（头像、用户名、邮箱等）
- 个人信息编辑
- 账号安全设置（修改密码、邮箱验证）
- 通知中心
- 我的反馈
- 使用统计
- 账号注销

**UI布局：**
- 顶部：用户头像、用户名、账号状态
- 个人信息卡片：基本信息展示和编辑入口
- 功能列表：
  - 账号安全
  - 通知设置
  - 我的反馈
  - 使用统计
  - 帮助中心
  - 关于我们
- 底部：退出登录按钮

**交互方式：**
- 点击头像或编辑按钮修改个人信息
- 点击各功能项进入对应页面
- 长按头像可预览大图
- 下拉刷新更新个人信息

### UI布局与交互设计

#### 导航设计

- **顶部导航栏：**
  - 左侧：应用名称或返回按钮
  - 右侧：设置按钮或其他快捷操作按钮（如删除、筛选）
  - 样式：
    - 高度: 44px
    - 背景色: #FFFFFF
    - 标题字号: 18px
    - 图标大小: 24px

- **底部导航栏：**
  - 常驻四个主要页面入口：主页、日历、统计、我的
  - 使用图标配合文字标签，提升可识别性
  - 样式：
    - 高度: 50px
    - 背景色: #FFFFFF
    - 选中色: #007AFF
    - 图标大小: 24px
    - 文字大小: 12px

#### 任务列表布局

- **任务项：**
  - 左侧：优先级标识（颜色或图标）
  - 中间：任务标题（支持多行）
  - 右侧：截止时间或提醒标识
  - 样式：
    - 卡片高度: 最小 64px
    - 内边距: 12px
    - 标题字号: 16px
    - 描述字号: 14px
    - 时间字号: 12px
    - 优先级标识：
      - 高: #FF3B30
      - 中: #FF9500
      - 低: #34C759

  - **列表筛选：**
    - 支持的筛选条件：
      - 状态: pending/completed
      - 优先级: high/medium/low
      - 分类: 选择具体分类
      - 标签: 多选标签
    - 排序选项：
      - 创建时间
      - 截止时间
      - 优先级
      - 自定义排序

#### 表单设计

  - **输入框样式：**
    - 高度: 44px
    - 内边距: 12px
    - 字号: 16px
    - 边框: 1px solid #E5E5EA
    - 圆角: 8px
    - 聚焦状态边框色: #007AFF

  - **按钮样式：**
    - 主要按钮:
      - 高度: 44px
      - 背景色: #007AFF
      - 文字颜色: #FFFFFF
      - 圆角: 22px
    - 次要按钮:
      - 高度: 44px
      - 背景色: #F2F2F7
      - 文字颜色: #007AFF
      - 圆角: 22px

#### API 交互设计

  - **数据加载：**
    - 下拉刷新: 
      - 触发距离: 60px
      - 加载动画: 圆环旋转
    - 上拉加载更多:
      - 每页数据: 20条
      - 底部加载提示
    - 骨架屏加载占位

  - **错误处理：**
    - 网络错误提示
    - 表单验证错误
    - 空数据状态展示
    - 加载失败重试

  - **动画过渡：**
    - 页面切换: slide-fade
    - 列表项动画: fade
    - 弹窗动画: scale
    - 加载动画: spin

#### 主题配色

  - **基础色值：**
    - 主题色: #007AFF
    - 背景色: #F2F2F7
    - 卡片背景: #FFFFFF
    - 分割线: #E5E5EA
    - 文字颜色:
      - 主要文字: #000000
      - 次要文字: #8E8E93
      - 提示文字: #C7C7CC

  - **功能色值：**
    - 成功: #34C759
    - 警告: #FF9500
    - 错误: #FF3B30
    - 链接: #007AFF

## 后端功能需求

### 本地数据存储

由于采用前后端分离架构，后端使用 Django + DRF 提供 RESTful API，数据存储采用以下方案：

- **数据库选择：**
  - 主数据库：MySQL
  - 缓存数据库：Redis
  - 文件存储：本地文件系统或云存储

- **认证方案：**
  - JWT (JSON Web Token) 认证
  - Token 自动刷新机制
  - 多设备登录支持

- **数据访问：**
  - RESTful API 接口
  - WebSocket 实时通知
  - 数据分页和缓存优化

### 数据同步与备份

- **数据同步：**
  - WebSocket 实时同步
  - 定时同步机制
  - 冲突解决策略

- **数据备份：**
  - 自动备份机制
  - 手动备份功能
  - 备份文件加密存储
  - 备份恢复功能

### 数据模型设计

设计合理的数据模型是确保应用稳定运行和数据一致性的关键。以下是主要的数据模型设计： 

+ 1. **用户模型 (User)**
+    - 基本信息：用户名、邮箱、密码、头像
+    - 扩展信息：最后登录时间、注册时间、账号状态
+    - 设备信息：关联设备列表、登录历史
+ 
+ 2. **任务模型 (Task)**
+    - 基本属性：标题、描述、创建时间、更新时间
+    - 状态信息：完成状态、优先级、截止时间
+    - 关联信息：所属分类、标签、创建者
+    - 提醒设置：提醒时间、重复规则
+ 
+ 3. **分类模型 (Category)**
+    - 基本信息：名称、颜色、图标
+    - 排序信息：显示顺序
+    - 统计信息：任务数量
+ 
+ 4. **标签模型 (Tag)**
+    - 基本信息：名称、颜色
+    - 使用统计：关联任务数
+ 
+ 5. **评论模型 (Comment)**
+    - 基本信息：内容、创建时间
+    - 关联信息：任务ID、用户ID
+ 
+ 6. **通知模型 (Notification)**
+    - 基本信息：标题、内容、类型
+    - 状态信息：已读状态、发送时间
+    - 关联信息：接收用户、相关任务
+ 
+ ### API 状态码处理
+ 
+ - **成功状态 (2xx)**
+   - 200: 请求成功
+   - 201: 创建成功
+   - 204: 删除成功
+ 
+ - **客户端错误 (4xx)**
+   - 400: 请求参数错误
+   - 401: 未认证
+   - 403: 权限不足
+   - 404: 资源不存在
+   - 409: 资源冲突
+ 
+ - **服务器错误 (5xx)**
+   - 500: 服务器内部错误
+   - 502: 网关错误
+   - 503: 服务不可用
+ 
+ ### 权限设计
+ 
+ 1. **用户角色**
+    - 普通用户：基础功能使用
+    - 高级用户：完整功能使用
+    - 管理员：系统管理权限
+ 
+ 2. **功能权限**
+    - 基础功能：
+      - 任务的基本CRUD操作
+      - 基础分类和标签管理
+      - 个人信息管理
+    
+    - 高级功能：
+      - 任务批量操作
+      - 数据导入导出
+      - 高级统计分析
+      - 自定义主题
+ 
+ 3. **数据权限**
+    - 个人数据：完全控制权限
+    - 共享数据：基于规则的访问控制
+    - 系统数据：仅管理员可访问
+ 
+ ### 缓存策略
+ 
+ 1. **Redis缓存**
+    - 用户会话信息
+    - 热门任务数据
+    - 统计数据缓存
+    - 验证码临时存储
+ 
+ 2. **本地缓存**
+    - 静态资源缓存
+    - 用户配置信息
+    - 基础数据字典
+ 
+ 3. **缓存更新策略**
+    - 定时更新
+    - 事件触发更新
+    - 手动强制更新
+ 
+ ### 安全策略
+ 
+ 1. **数据安全**
+    - 敏感数据加密存储
+    - 数据传输加密
+    - 定期数据备份
+ 
+ 2. **访问安全**
+    - JWT Token 认证
+    - 请求频率限制
+    - IP 黑名单机制
+ 
+ 3. **操作安全**
+    - 关键操作日志记录
+    - 异常操作告警
+    - 账号安全监控
+ 
+ ### API 接口规范
+ 
+ 1. **基础信息**
+    - 基础URL: `http://localhost:8000/api/v1`
+    - 认证方式: Bearer Token
+    - 响应格式: JSON
+ 
+ 2. **主要接口**
+ 
+    - **用户认证**
+      ```bash
+      # 登录获取token
+      POST /api/token/
+      
+      # 刷新token
+      POST /api/token/refresh/
+      
+      # 用户注册
+      POST /api/v1/accounts/users/register/
+      ```
+ 
+    - **任务管理**
+      ```bash
+      # 获取任务列表
+      GET /api/v1/tasks/tasks/
+      
+      # 创建任务
+      POST /api/v1/tasks/tasks/
+      
+      # 更新任务
+      PUT /api/v1/tasks/tasks/{id}/
+      ```
+ 
+    - **分类管理**
+      ```bash
+      # 获取分类列表
+      GET /api/v1/tasks/categories/
+      
+      # 创建分类
+      POST /api/v1/tasks/categories/
+      ```
+ 
+    - **标签管理**
+      ```bash
+      # 获取标签列表
+      GET /api/v1/tasks/tags/
+      
+      # 创建标签
+      POST /api/v1/tasks/tags/
+      ```
+ 
+ 3. **错误处理**
+    ```json
+    {
+        "error": "错误描述信息",
+        "code": "错误代码",
+        "details": {}
+    }
+    